# X-5 Execution Identity Alignment

**Document Type:** Design Alignment  
**Version:** 1.0  
**Date:** 2026-02-20  
**Branch:** feature/x5-execution-identity-refactor  
**Status:** MANDATORY — Must be reviewed before any X-5 code changes  
**References:**
- RAGFish: `design/invocation-boundary.md`
- RAGFish: `design/execution-flow.md`
- RAGFish: `design/mvp-consistency-checklist.md`
- RAGFish: `design/observability-standard.md`
- RAGFish: `design/security-model.md`
- noema-agent: `app/models.py` (current state, Phase 2A + X-4)

---

## 1. Summary of Design Changes

### 1.1 Authority Shift: Who Owns Identity Fields

The RAGFish design specifications establish a precise and non-negotiable ownership boundary between the **Client** and the **Execution Layer** for identity and traceability fields.

**`execution-flow.md` — Step 1, User Input:**
> "Client assigns:
> - session-id
> - request-id (UUID)
> - timestamp
> Input is immutable after submission."

**`observability-standard.md` — Section 3, Required Identifiers:**
> "trace_id MUST be generated at Invocation entry"
> "trace_id MUST be propagated across boundaries (client ⇄ server)"

**`invocation-boundary.md` — Section 8, Logging Requirements:**
> "Each Invocation MUST record:
> - question_id
> - routing_decision
> - selected_model
> - execution_result
> - fallback_usage
> - execution_timestamp"

### 1.2 Derived Ownership Rules

Cross-referencing the three documents above, the authoritative ownership assignment is:

| Field | Owner | Generation Point | Design Source |
|---|---|---|---|
| `session_id` | **Client** | Before invocation | `execution-flow.md` §Step 1 |
| `request_id` | **Client** | Before invocation | `execution-flow.md` §Step 1 |
| `trace_id` | **Execution Layer** | At Invocation entry | `observability-standard.md` §3 |
| `timestamp` (request) | **Client (metadata only)** | Before invocation | `execution-flow.md` §Step 1 |
| `timestamp` (response) | **Execution Layer** | At response generation | `invocation-boundary.md` §8 |
| `execution_time_ms` | **Execution Layer** | Measured internally | `observability-standard.md` §5 |

### 1.3 Critical Finding: trace_id Ownership

The most significant finding from this alignment is that **`trace_id` belongs exclusively to the Execution Layer**.

`observability-standard.md` §3 states:
> "trace_id MUST be generated at Invocation entry"

"Invocation entry" refers to the point at which the Execution Layer receives the request — not the point at which the Client constructs it. The Execution Layer is the single source of truth for `trace_id` because:

1. It is the first point where a true invocation boundary exists.
2. It must be propagated from this layer outward, not inward from the Client.
3. Accepting a Client-provided `trace_id` introduces a trust boundary violation: the Client could forge or replay trace identifiers.

`security-model.md` §3 (Threat Model) identifies:
> "T5: Replay attacks using session_id"

The same replay threat applies to any identifier the Client controls. A Client-controlled `trace_id` is a forgeable identity token.

### 1.4 The Current Violation

The current `InvocationRequest` model requires `request_id`, `trace_id`, and `timestamp` as mandatory Client-supplied fields. This directly contradicts `observability-standard.md` §3 and `security-model.md` §4.1, which define the Execution Layer as the point of origin for `trace_id` and the response `timestamp`.

---

## 2. Field Ownership Table

### 2.1 InvocationRequest — Current vs Expected

| Field | Current State (Phase 2A) | Expected State (X-5) | Ownership | Violation? |
|---|---|---|---|---|
| `session_id` | Required, Client-supplied | Required, Client-supplied | Client | ✅ Correct |
| `request_id` | **Required**, Client-supplied | Required, Client-supplied | Client | ✅ Correct |
| `task_type` | Required, Client-supplied | Required, Client-supplied | Client | ✅ Correct |
| `payload` | Optional, Client-supplied | Optional, Client-supplied | Client | ✅ Correct |
| `timestamp` | **Required**, Client-supplied | Optional metadata hint; never used as execution_timestamp | Client provides; Execution Layer does not trust | ⚠️ Grey area — see §3.2 |
| `trace_id` | **Required**, Client-supplied | **Must NOT be supplied by Client** | Execution Layer | ❌ **VIOLATION** |
| `privacy_level` | Optional, Client-supplied | Optional, Client-supplied | Client | ✅ Correct |

### 2.2 InvocationResponse — Current vs Expected

| Field | Current State (Phase 2A) | Expected State (X-5) | Ownership | Violation? |
|---|---|---|---|---|
| `session_id` | Echoed from request | Echoed from request | Echo of Client field | ✅ Correct |
| `request_id` | Echoed from request | Echoed from request | Echo of Client field | ✅ Correct |
| `trace_id` | Echoed from request | **Generated by Execution Layer** | Execution Layer | ❌ **VIOLATION** |
| `status` | Enum (success/error) | Enum (success/error) | Execution Layer | ✅ Correct |
| `result` | Task output | Task output | Execution Layer | ✅ Correct |
| `error` | Structured ErrorDetail | Structured ErrorDetail | Execution Layer | ✅ Correct |
| `timestamp` | **Echoed from executor** | **Generated by Execution Layer** | Execution Layer | ✅ Correct (but sourced incorrectly — see §3.3) |
| `execution_time_ms` | Measured internally | Measured internally | Execution Layer | ✅ Correct |
| `evidence` | Echoed from payload | Echoed from payload | Pass-through | ✅ Correct |

### 2.3 ErrorDetail — Current vs Expected

| Field | Current State (Phase 2A) | Expected State (X-5) | Ownership | Violation? |
|---|---|---|---|---|
| `code` | Execution Layer | Execution Layer | Execution Layer | ✅ Correct |
| `message` | Execution Layer | Execution Layer | Execution Layer | ✅ Correct |
| `recoverable` | Execution Layer | Execution Layer | Execution Layer | ✅ Correct |
| `trace_id` | **Echoed from request** | **Generated by Execution Layer** | Execution Layer | ❌ **VIOLATION** |
| `timestamp` | Execution Layer | Execution Layer | Execution Layer | ✅ Correct |

---

## 3. Required Model Changes

### 3.1 InvocationRequest

**Remove:**
- `trace_id: str` — MUST NOT be supplied by Client. Execution Layer generates it.

**Retain unchanged:**
- `session_id: str` — Client authority, required.
- `request_id: str` — Client authority, required.
- `task_type: str` — Client authority, required.
- `payload: dict` — Client authority, optional.
- `privacy_level: Optional[PrivacyLevel]` — Client authority, optional.

**Change:**
- `timestamp: str` — Status changes from **required** to **optional**. The Client MAY provide a submission timestamp as metadata, but the Execution Layer MUST NOT use it as the authoritative `execution_timestamp` in logs. It is a client-side hint only.

**Design Justification:**
`execution-flow.md` §Step 1 states the Client assigns a timestamp, but `invocation-boundary.md` §8 states the Execution Layer MUST record `execution_timestamp`. These are two different timestamps with different meanings. The Client's timestamp records *when the user submitted*. The Execution Layer's timestamp records *when execution began*.

The Execution Layer MUST treat the Client-provided timestamp strictly as informational metadata and MUST NOT propagate it into any authoritative execution log field.

### 3.2 InvocationResponse

**Change:**
- `trace_id: str` — Must be **generated by the Execution Layer** at invocation entry, NOT echoed from the Client-supplied request field. The field remains in the response, but its source of truth changes from `request.trace_id` to `uuid.uuid4()` generated inside `execute_task()`.

**Retain unchanged:**
- All other fields.

### 3.3 ErrorDetail

**Change:**
- `trace_id: str` — Must reference the **Execution Layer-generated** `trace_id`, not the Client-supplied value. Since `trace_id` will now be generated inside `execute_task()`, this field will be populated from that generated value.

**Retain unchanged:**
- `code`, `message`, `recoverable`, `timestamp`.

---

## 4. Required Behavioral Changes

### 4.1 trace_id Generation (CRITICAL)

**Current behavior:**
```
Client supplies trace_id in InvocationRequest
→ Execution Layer reads request.trace_id
→ Execution Layer echoes it in response and logs
```

**Required behavior:**
```
Client does NOT supply trace_id
→ Execution Layer generates trace_id = uuid.uuid4() at invocation entry
→ Execution Layer uses this value in all logs, response, and ErrorDetail
```

**Why this matters:**
`observability-standard.md` §3:
> "trace_id MUST be generated at Invocation entry"

"At Invocation entry" is the server-side boundary (`POST /invoke` handler or `execute_task()` entry). Generating it Client-side and transmitting it defeats the purpose of the guarantee — the Execution Layer cannot trust the value's integrity or uniqueness.

### 4.2 request_id Handling (Client-supplied, Echoed)

`request_id` remains a **Client-supplied** field per `execution-flow.md` §Step 1. It is assigned by the Client before submission, transmitted in `InvocationRequest`, and echoed in `InvocationResponse` for Client-side correlation. The Execution Layer must not generate or replace it.

**Required behavior (unchanged from Phase 2A):**
```
Client supplies request_id
→ Execution Layer validates its presence
→ Execution Layer echoes it in response unchanged
→ Execution Layer includes it in all logs
```

### 4.3 timestamp Handling

Two timestamps exist with different semantics:

**Client submission timestamp (`InvocationRequest.timestamp`):**
- Client-supplied, optional.
- Records when the user submitted the request.
- The Execution Layer MUST NOT use this as `execution_timestamp` in logs.
- The Execution Layer MAY log it as `client_timestamp` (separate field) for diagnostic purposes, but it MUST remain semantically distinct from `execution_timestamp`.

**Execution timestamp (generated internally):**
- Generated by the Execution Layer at invocation entry.
- Used as `timestamp` in `InvocationResponse` and in all log events.
- Source of truth for performance measurement and auditability.

### 4.4 execution_time_ms Measurement

No behavioral change required. `execution_time_ms` is already measured internally using `time.perf_counter()`. This is correct and compliant.

### 4.5 Client-Provided Identity Fields: Policy

| Field | Policy |
|---|---|
| `session_id` | Accept and echo. Client authority. |
| `request_id` | Accept and echo. Client authority. |
| `trace_id` | **REJECT** — field must not appear in `InvocationRequest`. Remove from schema. |
| `timestamp` (request) | Accept as optional metadata. Log as `client_timestamp`. Do not use as execution timestamp. |

---

## 5. Impact Analysis

### 5.1 Breaking Changes to Endpoints

**`POST /invoke`**

| Change | Impact | Severity |
|---|---|---|
| `trace_id` removed from `InvocationRequest` | Clients that send `trace_id` will receive `422 Unprocessable Entity` due to `extra="forbid"` | **BREAKING** |
| `trace_id` now Execution Layer-generated | Clients that read `trace_id` from response still work | Non-breaking |
| `timestamp` changed from required to optional in `InvocationRequest` | Clients that omit `timestamp` now succeed instead of failing | Non-breaking |

**`GET /health`, `GET /`**

No impact. These endpoints do not interact with `InvocationRequest`.

### 5.2 Validator Changes Required

**`InvocationRequest`:**
- Remove `trace_id` field entirely. `extra="forbid"` will automatically reject Client-supplied `trace_id` after removal.
- Change `timestamp` from `Field(...)` (required) to `Field(None)` (optional), type `Optional[str]`.

**`InvocationResponse`:**
- No schema changes. `trace_id` field stays. Its value source changes from echo to generation.

**`ErrorDetail`:**
- No schema changes. `trace_id` field stays. Its value source changes.

### 5.3 OpenAPI Schema Impact

The auto-generated OpenAPI schema (accessible at `/docs` and `/openapi.json`) will change:

| Schema Element | Change |
|---|---|
| `InvocationRequest.trace_id` | **Removed** from required properties |
| `InvocationRequest.timestamp` | Moved from `required` to optional (`nullable: true`) |
| `InvocationResponse.trace_id` | Remains present; description changes to "Execution Layer-generated trace identifier" |

Downstream systems or mock clients that depend on sending `trace_id` in the request will break. This must be communicated as a version-level change.

### 5.4 Test Changes Required

All tests that construct `InvocationRequest` with a `trace_id` field will fail after the change with `ValidationError`. This affects:

- `tests/test_phase2a.py` — Multiple tests supply `trace_id` directly to `InvocationRequest`.
- `tests/test_evidence_attachment.py` — Multiple tests supply `trace_id` directly to `InvocationRequest`.
- `test_compliance.py` — All integration tests supply `trace_id` in request payload.

All tests must be updated to:
1. Remove `trace_id` from `InvocationRequest` construction.
2. Assert that the response `trace_id` is a valid non-empty UUID generated by the server.
3. Assert that the `trace_id` in `error.trace_id` matches the response `trace_id`.

---

## 6. Migration Strategy

### 6.1 Backward Compatibility Policy

**Policy: BREAKING CHANGE — No backward compatibility maintained.**

Rationale:

The current behavior (Client-supplied `trace_id`) is a direct violation of `observability-standard.md` §3 and `security-model.md` §4.1. The security model identifies Client-controlled identity fields as a replay/forgery threat vector. Maintaining backward compatibility would perpetuate an active security and compliance violation.

`security-model.md` §6:
> "If a violation is detected: Fail fast. Return a structured error. Log incident with trace_id. Prevent continued execution. No silent recovery is allowed."

Allowing Clients to continue supplying `trace_id` violates this invariant.

### 6.2 Migration Path for Callers

1. **Remove `trace_id` from all request payloads.** Clients must stop sending it entirely.
2. **Read `trace_id` from the response.** The Execution Layer will return it in `InvocationResponse.trace_id` and in `ErrorDetail.trace_id`. Clients that need `trace_id` for correlation must read it from the response.
3. **Remove `timestamp` from required fields.** Clients may still send it as an optional metadata hint, but they are no longer required to.

### 6.3 Version Bump Required

**Yes. A version bump is required.**

`execution-flow.md` §7:
> "Changes require: ADR reference, Router matrix update, Invocation boundary review"

The API version in `app/main.py` is currently `"2.0.0"`. Given the breaking removal of `trace_id` from `InvocationRequest`, the new version must be `"3.0.0"` to signal a major breaking change to all consumers.

---

## STEP 2 — Violation Documentation

### Explicit Violation Report

**Violation ID:** V-X5-001  
**Severity:** High  
**Type:** Security + Compliance  
**Affected Component:** `app/models.py` — `InvocationRequest`  

**Violation Statement:**

`InvocationRequest` currently declares `trace_id` as a required field:

```python
# Current — VIOLATION
class InvocationRequest(BaseModel):
    ...
    trace_id: str = Field(..., description="Distributed tracing identifier (UUID)")
    ...
```

This violates `observability-standard.md` §3:
> "trace_id MUST be generated at Invocation entry"

**Root Cause:**

During Phase 2A implementation, `trace_id` was added to `InvocationRequest` to ensure traceability. The intent was correct, but the ownership was misassigned. The field was placed under Client authority when it belongs exclusively to the Execution Layer.

**Consequence:**

1. The Execution Layer has no guarantee that the `trace_id` it logs was freshly generated for this invocation. A Client may replay a prior `trace_id`, making log reconstruction ambiguous.
2. A malicious or misconfigured Client could supply a `trace_id` that collides with an active invocation, corrupting distributed trace correlation.
3. The `ErrorDetail.trace_id` field is currently populated from `request.trace_id`. If the request's `trace_id` is forged, the error log inherits the forged value.
4. This makes the system non-compliant with `security-model.md` §5, Invariant 5: "No response is returned without traceability" — because "traceability" requires the trace identifier to be integrity-protected, not just present.

**Violation ID:** V-X5-002  
**Severity:** Medium  
**Type:** Compliance  
**Affected Component:** `app/models.py` — `InvocationRequest`

**Violation Statement:**

`InvocationRequest.timestamp` is currently declared as a required field:

```python
# Current — VIOLATION
class InvocationRequest(BaseModel):
    ...
    timestamp: str = Field(..., description="Request creation time (ISO-8601)")
    ...
```

This conflates two semantically distinct timestamps: the Client submission time and the Execution Layer's invocation record time. `invocation-boundary.md` §8 mandates that the Execution Layer record `execution_timestamp` — its own timestamp — not a Client-supplied value.

**Consequence:**

1. Log events (`invocation_started`, `invocation_completed`) should use the Execution Layer's clock for `execution_timestamp`. If the Client can influence what goes into logs via a `timestamp` field, the logs are not fully under the Execution Layer's authority.
2. A Client with a misconfigured clock could write misleading timestamps into execution logs.

---

## Implementation Plan (X-5 Execution Identity Refactor)

### Plan Overview

X-5 corrects the `trace_id` ownership violation (V-X5-001) and the `timestamp` authority violation (V-X5-002). It is a pure refactor: the Execution Layer's behavior becomes more correct, the API contract becomes smaller and more secure, and no new functional capabilities are added.

---

### Model Modifications

**File: `app/models.py`**

**Change 1 — `InvocationRequest`: Remove `trace_id`**

Remove the `trace_id` field entirely. After removal, any Client that sends `trace_id` will receive a `422 Unprocessable Entity` response automatically, because `extra="forbid"` is already configured on the model.

Before:
```python
trace_id: str = Field(..., description="Distributed tracing identifier (UUID)")
```

After: Field removed entirely.

Because `extra="forbid"` is already configured on the model, any Client attempt to send `trace_id` after this change will automatically result in a `422 Unprocessable Entity`, enforcing the boundary at the schema level.

**Change 2 — `InvocationRequest`: Make `timestamp` optional**

Change `timestamp` from required to optional with a default of `None`. The field is retained to allow Clients to supply submission time as a diagnostic hint, but the Execution Layer will not use it as the authoritative execution timestamp.

Before:
```python
timestamp: str = Field(..., description="Request creation time (ISO-8601)")
```

After:
```python
timestamp: Optional[str] = Field(None, description="Client submission time hint (ISO-8601, optional)")
```

**Change 3 — `InvocationResponse`: Update `trace_id` description**

The field itself is unchanged (still `str`, still required). Only the docstring and field description must be updated to reflect that its source is now the Execution Layer, not the Client.

Before:
```python
trace_id: str = Field(..., description="Trace identifier from request")
```

After:
```python
trace_id: str = Field(..., description="Execution Layer-generated trace identifier (UUID)")
```

**Change 4 — `ErrorDetail`: Update `trace_id` description**

Same as `InvocationResponse.trace_id` — field is unchanged, description updated.

Before:
```python
trace_id: str = Field(..., description="Distributed tracing identifier")
```

After:
```python
trace_id: str = Field(..., description="Execution Layer-generated trace identifier (UUID)")
```

---

### Endpoint Modifications

**File: `app/main.py`**

**Change 1 — Version bump**

Update `version` from `"2.0.0"` to `"3.0.0"` to signal the breaking API change.

**Change 2 — No endpoint logic changes**

The `/invoke` route handler itself requires no changes. The identity generation logic moves entirely into `execute_task()`.

---

### Identity Generation Logic

**File: `app/executor.py`**

**Change 1 — Generate `trace_id` at invocation entry**

At the very first line of `execute_task()`, before any logging occurs, generate `trace_id` using `uuid.uuid4()`.

Before:
```python
def execute_task(request: InvocationRequest) -> InvocationResponse:
    start_time = time.perf_counter()
    log_invocation_started(trace_id=request.trace_id, ...)
    ...
    trace_id = request.trace_id  # reads from Client
```

After:
```python
def execute_task(request: InvocationRequest) -> InvocationResponse:
    trace_id = str(uuid.uuid4())  # generated here — first line
    start_time = time.perf_counter()
    log_invocation_started(trace_id=trace_id, ...)
    ...
    # trace_id is Execution Layer-owned from this point forward
```

**Change 2 — Remove `request_id = request.trace_id` assignment**

The line `trace_id = request.trace_id` must be removed. No other references to `request.trace_id` should remain.

**Change 3 — `request_id` still read from request**

`request_id = request.request_id` is unchanged. The Client remains authoritative for `request_id`.

**Change 4 — Add `uuid` import**

Add `import uuid` to the imports block.

---

### Logging Update Requirements

**File: `app/logging_utils.py`**

**No signature changes required.**

All three logging functions (`log_invocation_started`, `log_invocation_completed`, `log_error_raised`) already accept `trace_id` as a parameter. The only change is in the *caller* — `execute_task()` will now pass a locally generated `trace_id` instead of `request.trace_id`.

**Optional enhancement (recommended):**

Add an optional `client_timestamp` parameter to `log_invocation_started` to record the Client-supplied `request.timestamp` (if present) as a separate field for diagnostic purposes. This preserves the original Client time for debugging without using it as the authoritative execution record.

---

### Error Handling Update Requirements

**File: `app/executor.py`**

`ErrorDetail` is constructed with `trace_id=trace_id`. After the change, `trace_id` is now the Execution Layer-generated value. No structural change to error handling is required — only the source of `trace_id` changes.

The `ErrorDetail.trace_id` field will now always contain the correct, Execution Layer-generated trace identifier, resolving V-X5-001's consequence #3.

---

### Test Updates Required

**File: `tests/test_phase2a.py`**

All tests that pass `trace_id` to `InvocationRequest()` must:
1. Remove `trace_id` from the constructor call.
2. Add an assertion that `response.trace_id` is a non-empty string (valid UUID format).
3. Add an assertion that `response.trace_id` is NOT equal to any Client-supplied value (to confirm it was independently generated).

Affected tests:
- `test_invocation_request_valid` — remove `trace_id` from construction; assert it is absent from the model's fields.
- `test_executor_echo_task` — remove `trace_id` from `InvocationRequest`; assert `response.trace_id` is server-generated UUID.
- `test_executor_unsupported_task` — same as above; also assert `response.error.trace_id == response.trace_id`.
- `test_executor_trace_id_propagation` — **rename to `test_executor_trace_id_generated`**; assert `response.trace_id` is a UUID, assert it is NOT equal to any caller-supplied value.
- `test_executor_deterministic` — remove `trace_id` from `InvocationRequest`; note that `response.trace_id` will differ between calls (UUID is generated each time); only assert `result` and `status` for determinism, not `trace_id`.

**File: `tests/test_evidence_attachment.py`**

All tests that pass `trace_id` to `InvocationRequest()` must follow the same remediation as above.

Affected tests:
- All tests that call `InvocationRequest(trace_id=..., ...)` — remove the argument.
- Tests that assert `response.trace_id == original_trace_id` — change to assert `response.trace_id` is a valid non-empty UUID.

**File: `test_compliance.py`**

All integration tests that include `"trace_id"` in the request payload must:
1. Remove `"trace_id"` from the JSON payload.
2. Assert that the response JSON contains `"trace_id"` as a non-empty string.
3. The test `test_strict_schema_enforcement` must be updated: it currently sends an `extra_field` and expects `422`. A new variant should verify that sending `trace_id` in the request also produces `422`.

---

### UAT Expectations

The following behaviours must be manually verified after X-5 implementation:

| # | Scenario | Expected Outcome |
|---|---|---|
| UAT-1 | Send `POST /invoke` with `trace_id` in body | `422 Unprocessable Entity`, error references extra field |
| UAT-2 | Send `POST /invoke` without `trace_id` in body | `200 OK`, response contains `trace_id` generated by server |
| UAT-3 | Two successive identical requests (no `trace_id`) | Each response has a **different** `trace_id` (UUID uniqueness) |
| UAT-4 | Error response (unsupported task) | `error.trace_id` equals response-level `trace_id` |
| UAT-5 | Send `POST /invoke` without `timestamp` in body | `200 OK` (timestamp is now optional) |
| UAT-6 | Send `POST /invoke` with `timestamp` in body | `200 OK`, Client timestamp ignored for execution record |
| UAT-7 | Inspect structured log after request | Log `trace_id` matches response `trace_id` |
| UAT-8 | `GET /openapi.json` | `InvocationRequest` schema no longer lists `trace_id` |
| UAT-9 | `GET /openapi.json` | `InvocationRequest.timestamp` listed as optional (not required) |
| UAT-10 | `GET /` or `GET /health` | Version string reads `3.0.0` |

---

## Summary

| Item | Status |
|---|---|
| V-X5-001: `trace_id` in `InvocationRequest` | ❌ **Active violation — must be fixed in X-5** |
| V-X5-002: `timestamp` required in `InvocationRequest` | ⚠️ **Non-conformant — must be made optional in X-5** |
| `request_id` ownership | ✅ Correct — Client authority, no change needed |
| `session_id` ownership | ✅ Correct — Client authority, no change needed |
| `execution_time_ms` measurement | ✅ Correct — Execution Layer, no change needed |
| `InvocationResponse.timestamp` | ✅ Correct — Execution Layer generates it |
| `EvidenceAttachment` | ✅ Unaffected by X-5 |
| Version bump | **Yes — 2.0.0 → 3.0.0** |
| InvocationRequest.trace_id present in schema | ❌ Removed in X-5 |
| Backward compatibility | **None — breaking change** |
| ADR required | **Yes — per `execution-flow.md` §7** |

